---
title: "JMJPFU-SatisfiedTemplate"
output: html_notebook
---




# JMJPFU
### 10-Feb-2017

## Artefacts for a hotel

Room, Food, Restaurant, Staff, Lobby, Reception, Transfer, Facilities, Cleanliness, Recommend etc


This is the process for creation of Satisfied template for each artevact.


### Initial tasks : Setting up the library files

```{r}

library(SnowballC)
library(RWeka)
library(rJava)
library(RWekajars)
library(tm)
```


### Step 1 : Getting the relevant data from the Data set

This process entails getting the relevant data from the text data which has already been scrapped from the web. Reading each text and tagging as predominantly satisfied is going to be a manual process. 

Let us start off with the already prepared Satisfied data in the "WordAssociation.Rmd" file

```{r}

hiltSatisfaction <- hiltRev1[351:400]
hiltSatisfaction

# 255,258,273,

```

### Step2 : Get the term Document Matrix

Next task is to run the function for converting the list of text into a Document Term Matrix

```{r}

# Creating the Term Document Matrix
 satTdm <- tdmCreator(hiltSatisfaction)

```

### Step 3 : Creating the vectors for the most frequent words

```{r}

# Satisfied function for rooms

#roomSatTemp <- templateCreate(satTdm,'rooms',0.30)
#roomSatTemp1 <- templateCreate(satTdm,'rooms',0.30)
roomSatTemp1 <- templateCreate(satTdm,'rooms',0.30)
roomSatTemp2 <- templateCreate(satTdm,'room',0.30)

names(roomSatTemp1)[2] <- "freq8"
names(roomSatTemp2)[2] <- "freq8"

roomSatTemp1 <- rbind(roomSatTemp1,roomSatTemp2)

```

### Step 4 : Combining the templates

```{r}
# First creating a consolidated template
#roomSatCon <- roomSatTemp
#names(roomSatCon)[2] <- "FREQ"
```

Doing the merge of all the template 


```{r}

roomSatCon <- merge(roomSatCon,roomSatTemp1,all = TRUE) # First consolidation


```

### JMJPFU
### 13-Feb-2017

hiltRev1[51:80] - "freq3"
hiltRev1[81:120] - "freq4"
hiltRev1[200:250] - "freq5"
hiltRev1[251:300] - "freq6"
hiltRev1[301:350] - "freq7"
hiltRev1[351:400] - "freq8"
hiltRev1[401:450] - "freq9"
hiltRev1[451:550] - "freq10"
hiltRev1[551:650] - "freq11"
hiltRev1[651:750] - "freq12"

```{r}
# Looking at the text

hiltRev1[651:750]
```


Running the function for the consolidated template as per the above schedule

```{r}

roomSatCon <- conTemplate(hiltRev1,1051,1122,"rooms","room",0.3,"freq16",roomSatCon)

```

Now that one template is created, let us consolidate the results and make summary of the frequencies

```{r}
roomSatCon$Summary <- rowMeans(roomSatCon[,2:17],na.rm = TRUE)

roomSatCon$Count <- row(roomSatCon[,2:17],na.rm = TRUE)
```

Doing a row count

```{r}
for(i in 1:nrow(roomSatCon)){
  cou = 0
  
  for(j in 2:17){
    
    if(!is.na(roomSatCon[i,j])){cou = cou+1}
    
  }
  
  roomSatCon$Count[i] <- cou
  
}
```

# JMJPFU
## 15-Feb-2017

Let us write the consolidated dataframe into a csv file for further classification

```{r}
write.csv(roomSatCon,"Room_Satisfied.csv")
# Reading the file after validation

roomSatVal <- read.csv("Room_Satisfied.csv",header=TRUE)

roomSatVal$X <- NULL
```

# JMJPFU
### 16-Feb-2017

Today let us look at other emotions and check if there are any patterns evolving in them. We will look at 

Anger
```{r}
hiltRev1[191:220]

# Mixed : c(5,17,168,205)
# Anger : c(43,189)
# Frustrated : c(10,82,84)

```

# JMJPFU
### 24-Feb-2017

Let us now look at expanding the template with more text

```{r}

# Removing the count and summary columns

#roomSatCon$Summary <- roomSatCon$Count <- NULL

# Creating a new text

#satTemplate <- satisDf$badRev

# Consolidating with the template

roomSatCon <- conTemplate(satTemplate,1,59,"rooms","room",0.3,"freq17",roomSatCon)

```

## Creating template for another variable - Restaurant

## Initial template creator

```{r}
### Satisfied data

# satTemplate

###  Creating the term Document Matrix

satTdm <- tdmCreator(satTemplate)

### Creating an initial template for the emotion

restSatTemp <- templateCreate(satTdm,'restaurant',0.30)

```

## Template consolidator

```{r}

restSatTemp <- conTemplate(satTemplate,1,59,"restaurants","NA",0.3,"freq1",restSatTemp)

```

# JMJPFU
### 27-Feb-2017

### Creating template for "food"

Words like buffet,breakfast etc might also be associated with food

```{r}

#foodSatTemp <- templateCreate(satTdm,'food',0.30)

# Associating buffet and breakfast

foodSatTemp <- conTemplate(satTemplate,1,59,"buffet","NA",0.3,"freq1",foodSatTemp)

foodSatTemp <- conTemplate(satTemplate,1,59,"breakfast","NA",0.3,"freq2",foodSatTemp)



```

### Creating template for "staff"

```{r}

staffSatTemp <- templateCreate(satTdm,'staff',0.30)

## Associating "employees" and "employee" also with staff

staffSatTemp <- conTemplate(satTemplate,1,59,"employees","employee",0.3,"freq1",staffSatTemp)

```

### Creating template for "Lobby"

```{r}
lobbySatTemp <- templateCreate(satTdm,'lobby',0.3)

```

### Creating template for "Reception"

Associating front desk also with reception

```{r}
receptionSatTemp <- templateCreate(satTdm,'reception',0.3)
# Associating front desk also
receptionSatTemp <- conTemplate(satTemplate,1,59,"front desk","NA",0.3,"freq1",receptionSatTemp)

receptionSatTemp <- conTemplate(satTemplate,1,59,"frontdesk","receptionist",0.3,"freq2",receptionSatTemp)

```

## Creating template for "Transfer"

```{r}
transSatTemp <- templateCreate(satTdm,'transfers',0.3)
```

## Creating template for "facilities"

```{r}

facilSatTemp <- templateCreate(satTdm,'facility',0.3)

facilSatTemp <- conTemplate(satTemplate,1,59,"facilities","NA",0.3,"freq1",facilSatTemp)

```

## Creating template for "Location"

```{r}
locaSatTemp <- templateCreate(satTdm,'location',0.3)
```


